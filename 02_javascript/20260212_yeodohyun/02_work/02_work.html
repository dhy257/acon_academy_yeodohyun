<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>객체공유</title>
  </head>
  <body>
    <script>
      let equip = {
        name: "Excalibur",
        type: "Sword",
        level: 0,
        durability: 100,

        upgrade: function () {
          if (this.durability <= 0) {
            console.log("내구도가 없어 강화할 수 없습니다.");
            return;
          }
          // 내구도에 따른 확률 설정
          let successRate;

          if (this.durability >= 80) {
            successRate = 0.8;
          } else if (this.durability >= 50) {
            successRate = 0.6;
          } else if (this.durability >= 20) {
            successRate = 0.4;
          } else {
            successRate = 0.1;
          }

          let random = Math.random(); // 0 ~ 1

          if (random < successRate) {
            this.level += 1;
            console.log("강화 성공! 현재 레벨: " + this.level);
          } else {
            console.log("강화 실패...");
          }

          this.durability -= 10;
          console.log("현재 내구도: " + this.durability);
        },

        repair: function () {
          this.durability = 100;
          console.log("수리 완료! 내구도 100");
        },
        getInfo: function () {
          return (
            this.name +
            " " +
            this.type +
            " " +
            this.level +
            " " +
            this.durability
          );
        },
      };

      // 테스트
      document.write(equip.getInfo());
      document.write("<br>");
      
    </script>
  </body>
</html>
